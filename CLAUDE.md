# 뱀파이어 서바이벌 단순화 게임 프로젝트

## 📋 프로젝트 개요

### 게임 컨셉

- **장르**: 뱀파이어 서바이벌 단순화 버전
- **플랫폼**: 웹 → Capacitor로 모바일 앱 변환
- **아트 스타일**: 기하학적 도형 (아트 부담 최소화)
- **개발 기간**: 4주 예상

### 핵심 게임플레이

- **플레이어 조작**: 이동만 (터치/마우스)
- **자동 공격**: 플레이어 주변 궤도 무기
- **목표**: 15분 생존
- **성장**: 레벨업 시 3가지 강화 중 선택

## 🎮 게임 시스템

### 기본 메커니즘

1. **이동**: 터치/클릭한 지점으로 플레이어 이동
2. **자동 공격**: 무기가 가까운 적 자동 타겟팅
3. **경험치**: 적 처치 시 경험치 드롭, 수집 시 레벨업
4. **업그레이드**: 레벨업 시 3가지 선택지 제시

### 무기 시스템 (단순화)

- **궤도탄**: 플레이어 주변 도는 투사체
- **직선탄**: 플레이어에서 발사되는 투사체
- **방어막**: 플레이어 주변 보호막

### 메타 진행 시스템

- **클리어 시**: 유물 3개 중 1개 선택 획득
- **게임오버 시**: 유물 없음, 재시작만
- **난이도 증가**: 클리어할 때마다 적 스탯 +25%
- **유물 효과**: 영구적 능력 강화 (체력, 데미지, 속도 등)

## 📱 UI/UX 설계

### 모바일 우선 설계

- **화면 구성**: 상단 상태바 + 중앙 게임 영역 + 하단 버튼
- **기준 해상도**: 375px 너비 (모바일 표준)
- **데스크탑**: 모바일 크기 유지, 양쪽 여백 처리

### 화면별 구성

1. **인게임**: 상태바(HP, 레벨, 점수) + 게임 영역 + 조작 버튼
2. **레벨업**: 전체 화면 오버레이로 업그레이드 선택
3. **게임 클리어**: 결과 표시 + 유물 3개 중 선택
4. **게임오버**: 결과 표시 + 재시작/홈 버튼

### 터치 조작

- **이동**: 터치한 지점으로 플레이어 이동 (탭 투 무브)
- **UI 조작**: 충분한 크기의 터치 타겟 (44px 이상)
- **제스처**: 더블탭으로 일시정지

## 🔧 기술적 구현

### 개발 스택

- **프론트엔드**: React
- **그래픽**: pixiJS
- **상태 관리**: React useState/useReducer
- **모바일 변환**: Capacitor
- **저장**: LocalStorage

### 성능 고려사항

- **오브젝트 풀링**: 적/투사체 재사용으로 GC 부담 감소
- **프레임률 제한**: 30fps로 제한하여 배터리 절약
- **렌더링 최적화**: 화면 밖 오브젝트 렌더링 스킵

### 데이터 저장

- **게임 진행**: 클리어 횟수, 보유 유물, 난이도 배수
- **통계**: 최고 기록, 총 플레이 시간, 적 처치 수
- **설정**: 사운드, 진동 등 사용자 설정

## 📲 모바일 앱 변환 고려사항

### Capacitor 설정

- **안전 영역**: iOS 노치, Android 네비게이션 바 대응
- **성능 최적화**: WebView 성능 한계 고려
- **네이티브 기능**: 햅틱 피드백, 알림 활용

### 주요 이슈

1. **성능**: Canvas 게임의 WebView 성능 저하 (30-50%)
2. **터치 지연**: 300ms 지연 방지 설정 필요
3. **배터리**: 네이티브 대비 높은 배터리 소모
4. **앱스토어**: "웹 래퍼" 거부 위험, 네이티브 기능 필수

### 해결 방안

- **성능 프로파일링**: 실기기 테스트 필수
- **네이티브 기능 활용**: 햅틱, 푸시 알림 등 추가
- **최적화**: 불필요한 렌더링 제거, 메모리 관리

## 🗓 개발 일정

### 1주차: 기본 게임 구현

- 플레이어 이동 (터치 조작)
- 적 스폰 및 AI
- 자동 공격 시스템
- 충돌 감지

### 2주차: 게임 루프 완성

- 경험치 시스템
- 레벨업 및 업그레이드 선택
- 승리/패배 조건
- 기본 UI 구현

### 3주차: 메타 시스템

- 유물 시스템 (8-10개)
- 난이도 증가 메커니즘
- 데이터 저장/로드
- 게임 통계

### 4주차: 폴리싱 및 최적화

- 모바일 UI 최적화
- 성능 최적화
- Capacitor 변환 및 테스트
- 밸런싱 조정

## 🎯 핵심 설계 결정

### 단순화 선택

- **무기 3종류**: 복잡한 조합 대신 명확한 역할 분담
- **고정 목표**: 15분 생존 (뱀서의 30분보다 짧게)
- **기하학적 그래픽**: 아트 리소스 부담 제거
- **단일 맵**: 다양한 스테이지 대신 하나의 영역

### 재플레이 가치

- **유물 시스템**: 매 클리어마다 새로운 능력 획득
- **난이도 증가**: 점진적 도전 상승
- **선택의 재미**: 업그레이드와 유물 선택의 전략성

### 모바일 최적화

- **터치 친화적**: 조이스틱 대신 탭 투 무브
- **단순한 UI**: 최소한의 인터페이스 요소
- **성능 우선**: 화려함보다 안정성과 배터리 효율

## ⚠️ 주요 위험 요소

### 기술적 위험

1. **Canvas 성능**: 모바일에서 다수 오브젝트 처리 시 프레임 드롭
2. **Capacitor 한계**: WebView 성능 병목과 네이티브 기능 제약
3. **메모리 관리**: 장시간 플레이 시 메모리 누수 가능성

### 디자인 위험

1. **단순함의 지루함**: 너무 단순해서 금방 질릴 수 있음
2. **밸런싱**: 유물과 난이도 증가의 적절한 균형 찾기
3. **모바일 UX**: 터치 조작의 정확성과 편의성 확보

### 비즈니스 위험

1. **앱스토어 정책**: 웹 래퍼 앱의 승인 불확실성
2. **시장 경쟁**: 이미 포화된 생존 게임 시장
3. **수익화**: 단순한 게임의 수익 모델 한계

## 🎲 추가 고려사항

### 향후 확장 가능성

- **멀티플레이어**: 협동/경쟁 모드
- **시즌 콘텐츠**: 기간 한정 이벤트
- **커스터마이징**: 스킨, 이펙트 등
- **소셜 기능**: 리더보드, 업적 공유

### 수익화 옵션

- **광고**: 부활 시 광고 시청
- **프리미엄**: 광고 제거, 추가 유물
- **코스메틱**: 플레이어/무기 스킨
- **배틀패스**: 시즌별 진행 보상

## 📈 성공 지표

### 단기 목표 (출시 1개월)

- **사용자 유지율**: 1일 70%, 7일 30%
- **세션 길이**: 평균 10-15분
- **완주율**: 플레이어의 20% 이상이 첫 클리어

### 중기 목표 (출시 3개월)

- **월간 활성 사용자**: 1000명 이상
- **평균 세션**: 주당 5회 이상
- **수익화**: 월 수익 $100 이상 (광고/프리미엄)

이 프로젝트는 **단순함 속의 재미**와 **모바일 최적화**에 집중하여, 개발 부담을 최소화하면서도 중독성 있는 게임플레이를 제공하는 것을 목표로 합니다.

---

# 📋 구현 완료 현황 (업데이트됨)

## 🎯 **전체 진행률: 약 70% 완료**

### ✅ **Week 1-2: 핵심 게임플레이 완료 (100%)**

#### 🎮 **게임 엔진 & 핵심 시스템**
- **PixiJS 게임 엔진**: 완전 구현 (375x455 캔버스, React 통합)
- **게임 루프**: 15분 생존 목표, 일시정지/재개 기능
- **플레이어 시스템**: 터치/마우스 이동, 부드러운 애니메이션
- **적 AI 시스템**: 자동 스폰, 플레이어 추적, 화면 밖 제거

#### ⚔️ **전투 & 무기 시스템**
- **궤도탄 무기**: 플레이어 주변 회전하는 청록색 투사체
- **직선탄 무기**: 가장 가까운 적 자동 타겟팅 황색 투사체  
- **충돌 감지**: 원형 충돌 시스템, 정확한 히트박스
- **데미지 시스템**: 투사체 15 데미지, 적 30 체력

#### 📊 **경험치 & 레벨업**
- **경험치 드롭**: 적 처치 시 10 XP 획득
- **레벨업 계산**: 필요 경험치 20% 증가 (100 → 120 → 144...)
- **업그레이드 선택**: 5가지 강화 옵션 (궤도탄, 직선탄, 방어막, 체력, 속도)
- **레벨업 UI**: 전체 화면 모달, 게임 일시정지

#### 🎯 **충돌 & 데미지 시스템**
- **플레이어 데미지**: 레벨별 증가 (기본 10 + (레벨-1) × 0.5)
- **무적시간**: 1초 무적, 시각적 반투명 효과
- **게임오버**: 체력 0 시 자동 감지 및 처리
- **적 스폰 스케일링**: 5레벨마다 동시 스폰 수 +1 (1→2→3마리)

### ✅ **UI/UX 시스템 완료 (100%)**

#### 📱 **모바일 우선 인터페이스**
- **HUD 시스템**: 상태바, 체력바, 경험치바, 스킬 아이콘
- **메인 메뉴**: 게임 시작, 설정 버튼 (완전 기능)
- **레벨업 화면**: 5가지 업그레이드 선택 UI
- **게임오버 화면**: React Portal 사용, 결과 표시, 재도전/메인메뉴 버튼

#### 🎨 **반응형 디자인**
- **375px 기준**: 모바일 최적화 레이아웃
- **터치 최적화**: 44px+ 터치 타겟, 300ms 지연 방지
- **시각적 피드백**: 무적시간 반투명, 진행바 애니메이션

### ✅ **상태 관리 & 아키텍처 (100%)**

#### 🔄 **React 상태 관리**
- **GameStateContext**: useReducer 기반 중앙 상태 관리
- **실시간 동기화**: GameEngine ↔ React 상태 양방향 통신
- **액션 시스템**: 13개 게임 액션 타입 (시작, 일시정지, 레벨업, 데미지 등)

#### 🏗️ **코드 아키텍처**
```
src/
├── components/           # React UI 컴포넌트 (5개)
│   ├── GameCanvas.tsx   # PixiJS 통합 래퍼
│   ├── HUD.tsx          # 게임 상태 표시
│   ├── LevelUp.tsx      # 업그레이드 선택
│   ├── MainMenu.tsx     # 메인 메뉴
│   └── GameOver.tsx     # 패배 화면
├── contexts/             # 상태 관리
│   └── GameStateContext.tsx
├── game/                 # 게임 로직 (PixiJS)
│   ├── GameEngine.ts    # 메인 게임 엔진
│   ├── entities/        # 플레이어, 적 클래스
│   └── managers/        # 시스템 매니저들
└── App.tsx              # 메인 앱 구조
```

### ⚠️ **부분 완료 사항**

#### 🛡️ **방어막 무기 시스템**
- **설계 완료**: 상태 관리, UI 아이콘 준비
- **미구현**: 실제 게임 엔진 내 방어막 로직

#### 🔧 **업그레이드 효과 연동**
- **UI 완료**: 레벨업 시 상태 업데이트
- **부분 연동**: 일부 효과가 게임플레이에 반영 안됨

### ❌ **미구현 사항 (Week 3-4)**

#### 🏆 **메타 진행 시스템**
- 유물 시스템 (8-10개 유물)
- 클리어 시 유물 선택 UI
- 난이도 스케일링 (클리어 시 +25%)
- LocalStorage 데이터 저장

#### 📱 **모바일 앱 변환**
- Capacitor 프로젝트 설정
- 네이티브 기능 (햅틱 피드백)
- 성능 최적화 (30fps 제한, 오브젝트 풀링)

## 🔧 **기술적 구현 세부사항**

### 📋 **핵심 클래스 구조**

#### GameEngine.ts
- **게임 루프**: 60fps PIXI ticker, delta time 계산
- **상태 동기화**: React 상태와 실시간 연동
- **충돌 시스템**: CollisionManager 통합
- **시간 관리**: 15분 생존 목표, 게임 시간 추적

#### Player.ts
- **이동 시스템**: 부드러운 타겟 기반 이동 (150px/s)
- **무적시간**: 1초 무적, 시각적 피드백
- **스프라이트**: 파란 원 (반지름 15px), 흰색 테두리

#### EnemyManager.ts
- **스폰 시스템**: 0.67초마다 화면 가장자리에서 스폰
- **레벨 스케일링**: 5레벨마다 동시 스폰 수 증가
- **AI**: 플레이어 추적, 화면 밖 자동 제거

#### WeaponManager.ts
- **궤도탄**: 플레이어 중심 회전, 3px 반지름
- **직선탄**: 가장 가까운 적 자동 조준, 200px/s 속도
- **자동 공격**: 실시간 타겟팅, 투사체 생명주기 관리

### 🎮 **게임플레이 밸런싱**

#### 데미지 시스템
- **플레이어 받는 데미지**: 10 + (레벨-1) × 0.5
- **무기 데미지**: 투사체 15, 궤도탄 접촉 시
- **적 체력**: 30 HP
- **경험치**: 적당 10 XP

#### 난이도 곡선
- **적 스폰**: 레벨 1-4 (1마리) → 5-9 (2마리) → 10-14 (3마리)
- **필요 경험치**: 매 레벨업마다 20% 증가
- **생존 목표**: 15분 (900초)

### 🐛 **해결된 주요 이슈들**

#### 1. **무적시간 시스템**
- **문제**: 0.1초 무적시간이 너무 짧아서 효과 없음
- **해결**: 1초로 연장, 시각적 피드백 강화

#### 2. **게임시간 초기화**
- **문제**: 레벨업 시 게임시간이 0으로 리셋
- **해결**: start()와 restart() 메서드 분리

#### 3. **게임오버 UI**
- **문제**: App.css overflow:hidden으로 인해 모달 안보임  
- **해결**: React Portal로 document.body에 직접 렌더링

#### 4. **충돌 데미지**
- **문제**: 한 번 충돌 후 더 이상 데미지 안받음
- **해결**: 무적시간 시스템과 currentPlayerHealth 동기화

## 📊 **성능 & 최적화**

### ✅ **현재 최적화**
- **React 최적화**: useCallback, useMemo 적절히 사용
- **PixiJS 최적화**: Graphics 객체 재사용, 스프라이트 풀링 기본 구조
- **메모리 관리**: 화면 밖 오브젝트 자동 제거
- **렌더링**: 필요시에만 스프라이트 업데이트

### 🔄 **추가 예정 최적화**
- 오브젝트 풀링 (적, 투사체)
- 30fps 제한
- 화면 밖 렌더링 스킵
- 메모리 누수 방지

## 🧪 **테스트 가능한 기능들**

### ✅ **완전 동작**
1. 플레이어 이동 (마우스 클릭/터치)
2. 적 자동 스폰 및 추적
3. 궤도탄, 직선탄 무기 공격
4. 적 처치 시 경험치 획득
5. 레벨업 시 업그레이드 선택
6. 플레이어 데미지 및 무적시간
7. 게임오버 시 결과 화면
8. 재시작 및 메인메뉴 기능

### ⚠️ **부분 동작**
1. 업그레이드 효과 (UI만 동작, 일부 게임플레이 미연동)
2. 방어막 무기 (아이콘만, 실제 기능 없음)

## 🎯 **다음 우선순위**

### 1. **방어막 무기 구현**
- 플레이어 주변 회전하는 보호막
- 적 투사체 차단 기능
- 시각적 이펙트 추가

### 2. **업그레이드 효과 연동**
- 속도 업그레이드 → 실제 이동속도 증가
- 체력 업그레이드 → 최대 체력 증가
- 무기 업그레이드 → 데미지/개수 증가

### 3. **유물 시스템**
- 15분 클리어 시 유물 3개 중 선택
- 영구적 능력 강화
- 난이도 증가 메커니즘

이 문서는 프로젝트의 현재 상태와 향후 계획을 정확히 반영하며, 개발 진행상황을 실시간으로 추적할 수 있도록 구성되었습니다.
